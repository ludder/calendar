define(function(){function e(){window.console&&console.log(arguments)}return{debug:e}}),define(["lib/jquery","js/sb-datepicker-utils","js/sb-datepicker.model","js/sb-datepicker.view"],function(e,t,n,r){function i(e){this.options=e,this.model=new n(this.options),this.view=new r(this.options),this.days=[]}function s(n){if(!e.isPlainObject(n)){t.debug("invalid options object",n);return}return(new i(n)).init()}return i.prototype={init:function(){this.createMonths(),this.render(),this.initEvents()},createMonths:function(){this.days=this.model.createMonthRange()},render:function(){this.view.render(this.days)},addMonth:function(){},refresh:function(){},destroy:function(){},initEvents:function(){this.view.initEvents()}},{init:s}}),define(["js/sb-datepicker.controller"],function(e){return{init:function(t){return e.init(t)}}}),define(["lib/jquery","js/sb-datepicker-utils.js"],function(e,t){function s(e,t,n){var r,i=[];n=n||1,r=n>0?1:0;for(;r<e;r+=1)i.push(t(n*r));return n<0?i.reverse():i}function o(e){return(new Date(e.setDate(1))).getDay()}function u(e,t){var n=new Date(e,t+1,0);return{date:n.getDate(),day:n.getDay()}}function a(e){var t=e.getMonth(),n=e.getFullYear(),r=u(n,t).date+1;return s(r,this.createAddDay(e))}function f(t){this.options=e.extend({},i,t),this.today=r,this.days=[]}var n=864e5,r=(new Date).setHours(0),i={range:1,startDate:r,minDate:r,maxDate:new Date(2100,1,1)};return f.prototype={isInRange:function(e){return e>this.options.minDate&&e<this.options.maxDate},isDisabled:function(e){return e<this.today||e>this.maxDate},addDay:function(e){return{date:e,selectable:this.isInRange(e),disabled:this.isDisabled(e)}},createAddDay:function(e){var t=this,n=e.getFullYear(),r=e.getMonth(),i=e.getDate();return function(e){return t.addDay(new Date(n,r,i+e))}},getPostMonth:function(e){var t=u(e.getFullYear(),e.getMonth()),n=t.day,r=6-n,i=new Date(e.getFullYear(),e.getMonth()+1);return s(r,this.createAddDay(i))},getPreMonth:function(e){var t=o(e)+1;return s(t,this.createAddDay(e),-1)},addPreMonth:function(e){this.days=this.days.concat(this.getPreMonth(e))},addPostMonth:function(e){this.days=this.days.concat(this.getPostMonth(e))},addMonth:function(e){this.days=this.days.concat(a(e))},addNextMonth:function(e){var t=this.days.length,n=this.days[t-1];console.log(n)},createMonthRange:function(){var e,t,n=new Date(this.options.startDate.getTime()),r=n.getMonth();this.addPreMonth(n),this.addMonth(n);for(e=1;e<this.options.range;e+=1)t=new Date(n.setMonth(r+=1)),this.addMonth(t);return this.addPostMonth(n),this.days}},f}),define(["lib/jquery"],function(e){function s(t){this.months=t.months||i.shortMonths,this.$container=typeof t.containerId=="string"?e("#"+t.containerId):e("body"),this.$result=e("#"+t.resultId)}var t={wrapper:"dp-datepicker",year:"dp-year",month:"dp-month",weekDays:"dp-wdays",selectable:"dp-selectable",disabled:"dp-disabled"},n={day:'<li><a data-msdate="${msdate}" href="#" class="${selectable} ${disabled}">${date}</a></li>',month:'<span class="'+t.month+'">${month}</span>',weekDays:'<div class="'+t.weekDays+'">'+"<span>S</span><span>M</span><span>T</span><span>W</span>"+"<span>T</span><span>F</span><span>S</span>"+"</div>",year:'<div class="'+t.year+'">${year}</div>',wrapper:'<div class="'+t.wrapper+'">${datepicker}</div>'},r=/\$\{(\w+)\}/gim,i={shortMonths:["jan","feb","mar","apr","may","jun","jul","aug","sept","oct","nov","dec"]};return s.prototype={wrap:function(e){return n.wrapper.replace(r,e)},renderWeekDays:function(){return n.weekDays},renderYear:function(e){e=e||new Date;var t=e.getFullYear();return n.year.replace(r,t)},renderMonth:function(e){return n.month.replace(r,this.months[e])},renderDay:function(e,n){var r=e[n],i=r&&typeof r.getDate=="function"&&r.getDate(),s=i&&r.getMonth();switch(n){case"date":return i===1?this.renderMonth(s)+" "+i:i;case"msdate":return e.date.getTime();case"selectable":return r&&t[n]||"";case"disabled":return r&&t[n]||"";default:return r}},createRenderDay:function(e){var t=this;return function(n,r){return t.renderDay(e,r)}},render:function(e){var i=this,s=this.renderYear(e[0]&&e[0].date),o=e;return s+=this.renderWeekDays(),s+='<ul class="dp">',o.forEach(function(e){s+=n.day.replace(r,i.createRenderDay(e))}),s+="</ul>",this.$container.html(this.wrap(s)),this.$datepicker=this.$container.find("."+t.wrapper).eq(0),this.$datepicker},initEvents:function(){var e=this;this.$datepicker.on("click","."+t.selectable,function(t){t.preventDefault(),e.$result.html(new Date(parseInt(t.target.getAttribute("data-msdate"),10)))}),this.$datepicker.on("click","."+t.month,function(e){})}},s});